{% extends "layout.html" %}

{% block title %}
    Index
{% endblock %}

{% block main %}
    <!-- bootstrap flexbox -->
    <div class="d-flex flex-wrap justify-content-around">
        {% for bookmark in bookmarks %}
            <div class="book-item mb-3 mr-2 border border-light">
                <h5>{{bookmark['category']}}</h5>
                <ul class='resources'>
                    {% for row in bookmark['rows'] %}
                        <!-- href="javascript:" makes it a fake anchor -->
                        <li><a href="javascript:" data-toggle='tooltip'
                            title="{{row['tooltip']}}" data-placement='right'
                            data-html='true' id="{{row['bid']}}" 
                            onclick="edit(this)">
                            {{row['short_title']}}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div> <!-- end bookitem -->
        {% endfor %}
    </div> <!-- end flexbox-->
{% endblock %}

{% block scripts %}
<script>
    function edit(anchor){
        var answer = prompt('Are you sure you want to remove it (yes/no)');
        answer = answer.toLowerCase();
        if (answer == 'yes' || answer == 'y'){
            post_id = anchor.id;
            $.get('rem_book_id/' + post_id, function(data){
                $("[data-toggle='tooltip']").tooltip('hide');
                // data is the index route: '/'
                window.location.assign(data);
        });
        }
        
    };
</script>
{% endblock %}